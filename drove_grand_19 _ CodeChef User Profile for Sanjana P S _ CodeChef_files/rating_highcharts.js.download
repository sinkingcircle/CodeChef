jQuery(document).foundation();function ratingGraphSelection(t,e){if(e){if(t){$("#cumulative-school").hide();$("#cumulative-old-school").show();$("#graph-button-all-old-school").addClass("button-active");$("#graph-button-all-school").removeClass("button-active")}else{$("#cumulative-school").show();$("#cumulative-old-school").hide();$("#graph-button-all-old-school").removeClass("button-active");$("#graph-button-all-school").addClass("button-active")}}else{if(t){$("#cumulative").hide();$("#cumulative-old").show();$("#graph-button-all-old").addClass("button-active");$("#graph-button-all").removeClass("button-active")}else{$("#cumulative").show();$("#cumulative-old").hide();$("#graph-button-all-old").removeClass("button-active");$("#graph-button-all").addClass("button-active")}}}$(document).ready(function(){var t={all:"cumulative",all_old:"cumulative-old"};var e=Drupal.settings["date_versus_rating"];var a=Drupal.settings["provisional_rating_contest_limit"];var o=Drupal.settings["user_initial_ratings"];if(e["all"].length<e["all_old"].length){ratingGraphSelection(1,0)}else{if(!e["all_old"].length){$("#all-ratings-graph-buttons").hide()}ratingGraphSelection(0,0)}const i=Drupal.settings["rating_shift_to_elo_rating_date"];const r=Drupal.settings["rating_shift_to_elo_rating_code"];var n=function(t,e,i,n,s){var l=function(t){var e=t.length;var a=[];var o;for(var i=0;i<e;i++){o={};if(!t[i]["reason"]){o=[Date.UTC(t[i]["getyear"],t[i]["getmonth"],t[i]["getday"]),parseInt(t[i]["rating"])];a.push(o)}else{o={x:Date.UTC(t[i]["getyear"],t[i]["getmonth"],t[i]["getday"]),y:parseInt(t[i]["rating"]),marker:{symbol:"triangle-down"}};a.push(o)}}if(a==[]){a.push([Date.UTC(2008,1,1),0])}return a};var c=l(e);var h;var d;if(s){h={type:"datetime",dateTimeLabelFormats:{day:"%Y",week:"%Y",month:"%Y",year:"%Y"},title:{text:"Year"}};d={gridLineDashStyle:"longdash",title:{text:"Rating"}}}else{h={type:"datetime",dateTimeLabelFormats:{day:"%Y",week:"%Y",month:"%Y",year:"%Y"},title:{text:"Year",margin:15,style:{"font-weight":"bold","font-size":"13px",color:"#4a4a4a"}}};d={gridLineDashStyle:"longdash",title:{text:"Rating",margin:15,style:{"font-weight":"bold","font-size":"13px",color:"#4a4a4a"}},plotBands:[{color:"#DADADA",from:0,to:1400},{color:"#C9E0CA",from:1400,to:1600},{color:"#CEDAF3",from:1600,to:1800},{color:"#DBD2DE",from:1800,to:2e3},{color:"#FFF0C2",from:2e3,to:2200},{color:"#FFE3C8",from:2200,to:2500},{color:"#F1C1C8",from:2500,to:5e4}]}}var u=function(t){var e=t.series[0].points.length-1;if(t.series[0].points[e]){t.series[0].points[e].select()}};var g=function(t){var e=t.series[0].points.length-1;if(t.series[0].points[e]){t.series[0].points[e].update({marker:{symbol:"square",fillColor:"blue",states:{hover:{fillColor:"blue",lineColor:"black"}}}})}};var f=function(t){if(t.series[0].data.length<1){$(t.renderTo).siblings().remove();$(t.renderTo).html('<img src="https://cdn.codechef.com/sites/all/themes/abessive/images/no-participation-graph.jpg" alt="No Participation">')}};var p=function(t,e){t.update({marker:{fillColor:e,states:{hover:{fillColor:e,lineColor:e}}}})};var v=function(t,e,a){var o=e[t].penalised_in;$.each(o,function(t,o){$.each(e,function(t,e){if(e.code==o){var i=a.series.data[t];p(i,"red")}})})};var m=function(t,e){$.each(t,function(t,a){var o=e.series.data[t];p(o,"#000")})};var b=Highcharts.chart(t,{credits:{enabled:false},chart:{polar:true,type:"line",zoomType:"xy"},plotOptions:{line:{lineWidth:1,color:"#000"},series:{pointStart:e.length>0?e[0].getyear:2008,allowPointSelect:true,cursor:"pointer",marker:{enabled:true,states:{select:{enabled:true}}},states:{hover:{enabled:true,lineWidth:1}},point:{events:{click:function(){var t=this;var l=this.index;var c=0;if(e.length>0){var h=this.y;var d=n.replaceAll("_","-");if(l<a-1){h+="?";$("#actual-rating-status-"+d).hide();$("#provisional-rating-status-"+d).show()}else{$("#actual-rating-status-"+d).show();$("#provisional-rating-status-"+d).hide()}$("#"+i+" .rank-stats .rating").html(h+' (<span class="rating-difference"></span>)');$("#"+i+" .rank-stats .global-rank").text(e[l].rank);$("#"+i+" .rank-stats .contest-name").html('<a href="https://www.codechef.com/'+e[l].code+'">'+e[l].name+'</a><span class="time"></span>');$("#"+i+" .rank-stats .contest-name .time").text("("+e[l].end_date+")");if(e[l].reason){v(l,e,t);$("#"+i+" .rank-stats .cheated-contest").text(e[l].reason).parent().show()}else{m(e,t);$("#"+i+" .rank-stats .cheated-contest").parent().hide()}if(l==0){c=e[l].rating-o[n];$("#"+i+" .rank-stats .rating-difference").text((c<0?"":"+")+c)}else{c=e[l].rating-e[l-1].rating;$("#"+i+" .rank-stats .rating-difference").text((c<0?"":"+")+c)}if(!s){$("#"+i+" .rank-stats .left:first-child").css("background-color",e[l].color)}if(r===e[l].code){$("#rating-box-"+d).hide();$("#rating-change-desc-"+d).show()}else{$("#rating-box-"+d).show();$("#rating-change-desc-"+d).hide()}}}}}}},title:{text:null},tooltip:{enabled:false},xAxis:h,yAxis:d,series:[{name:"Rating",data:c,lineWidth:1}]},function(t){u(t);f(t);if(n.indexOf("old")!==-1){g(t)}})};$.each(t,function(t,a){n(a+"-graph",e[t],a,t,false)})});